---
name: steering
description: 作業指示毎の作業計画、タスクリストをドキュメントに記録するためのスキル。ユーザーからの指示をトリガーとした作業計画時、実装時、検証時に読み込む。
allowed-tools: Read, Write
---

# Steering スキル

ステアリングファイル（`.steering/`）に基づいた実装を支援し、tasklist.mdの進捗管理を確実に行うスキルです。

## スキルの目的

- ステアリングファイル（requirements.md, design.md, tasklist.md）の作成支援
- tasklist.mdに基づいた段階的な実装管理
- **進捗の自動追跡とtasklist.md更新の強制**
- 実装完了後の振り返り記録

## 使用タイミング

1. **作業計画時**: ステアリングファイルを作成する時
2. **実装時**: tasklist.mdに従って実装する時
3. **検証時**: 実装完了後の振り返りを記録する時

## モード1: ステアリングファイル作成

### 目的
新しい機能や変更のためのステアリングファイルを作成します。

### 手順

1. **ステアリングディレクトリの確認**
   ```
   現在の日付を取得し、`.steering/[YYYYMMDD]-[機能名]/` の形式でディレクトリを作成
   ```

2. **永続ドキュメントの確認**
   - `docs/product-requirements.md`
   - `docs/functional-design.md`
   - `docs/architecture.md`
   - `docs/repository-structure.md`
   - `docs/development-guidelines.md`

   これらを読んで、プロジェクトの方針を理解する

3. **テンプレートからファイル作成**

   以下のテンプレートを読み込み、プレースホルダーを具体的な内容に置き換えてファイルを作成:

   - `.claude/skills/steering/templates/requirements.md` → `.steering/[日付]-[機能名]/requirements.md`
   - `.claude/skills/steering/templates/design.md` → `.steering/[日付]-[機能名]/design.md`
   - `.claude/skills/steering/templates/tasklist.md` → `.steering/[日付]-[機能名]/tasklist.md`

4. **tasklist.mdの詳細化**

   requirements.mdとdesign.mdに基づいて、tasklist.mdを詳細化:
   - 各フェーズのタスクを具体的に記述
   - サブタスクも明確に
   - 実装の順序を明記

## モード2: 実装

### 目的
tasklist.mdに従って実装を進め、**進捗を確実にドキュメントに記録**します。

### 原則

1. **tasklist.mdが正式な進捗ドキュメント**（TodoWriteは補助的なメモ）
2. **タスクの完了はEditツールでtasklist.mdに即時反映**する（まとめて更新しない）
3. **全タスク完了が原則**。スキップは技術的理由（実装方針変更・アーキテクチャ変更・依存関係変更）のみ許可
4. タスクが大きすぎる場合はサブタスクに分割してtasklist.mdに追加
5. 未完了タスクを残したまま振り返りを書かない

### 実装フロー

#### ステップ1: tasklist.mdを読み込む

```
Read('.steering/[日付]-[機能名]/tasklist.md')
```

全体のタスク構造を把握し、次に着手すべきタスクを特定する。
TodoWriteツールでタスクリストを作成（補助的なメモとして）。

#### ステップ2: タスクループ（各タスクで繰り返す）

1. **タスク開始**: tasklist.mdから次の未完了タスク（`[ ]`）を特定し、Editツールで`[x]`に更新
2. **実装**: 開発ガイドライン（`docs/development-guidelines.md`）に従って実装
3. **記録**: タスク完了をtasklist.mdに記録。サブタスクがある場合は個別に更新。TodoWriteでもステータスを更新

上記を全タスクが`[x]`になるまで繰り返す。

#### ステップ3: 完了チェック

全フェーズの実装完了後:

1. tasklist.mdを読み込み、未完了タスク（`[ ]`）がないか確認
2. **未完了タスクがある場合**:
   - タスクを実装する（ステップ2に戻る）
   - 大きすぎる場合はサブタスクに分割
   - 技術的理由で不要な場合のみスキップ可（理由を明記: `[x] ~~タスク名~~（理由: ...）`）
3. **全タスク完了を確認できたら**ステップ4へ

#### ステップ4: 振り返り

tasklist.mdの「実装後の振り返り」セクションを更新:
- 実装完了日
- 計画と実績の差分
- 学んだこと
- 次回への改善提案

### セルフチェック

5タスクごとに以下を確認:

- [ ] tasklist.mdを最近更新したか？
- [ ] 進捗がドキュメントに反映されているか？
- [ ] ユーザーがtasklist.mdを見て進捗が分かるか？

## モード3: 振り返り

### 目的
実装完了後、tasklist.mdに振り返りを記録します。

### 手順

1. tasklist.mdを読み込む
2. 振り返り内容を作成（実装完了日、計画と実績の差分、学んだこと、次回への改善提案）
3. Editツールでtasklist.mdの「実装後の振り返り」セクションを更新
4. ユーザーに報告:「振り返りをtasklist.mdに記録しました。内容を確認してください。」

## トラブルシューティング

### tasklist.mdの更新を忘れた場合

1. 即座にtasklist.mdを読み込み、完了したタスクを特定してEditツールで`[x]`に更新
2. ユーザーに報告:「tasklist.mdの更新が遅れていたため、現在の進捗を反映しました。」

### tasklist.mdと実装の乖離

1. 該当タスクに注釈を追加（例: `[x] タスク名（実装方法を変更: 理由）`）
2. 必要に応じて新しいタスクを追加
3. 設計の変更が大きい場合はdesign.mdも更新

## チェックリスト

実装前:
- [ ] tasklist.mdを読み込んだか？
- [ ] 次のタスクを特定したか？

実装後:
- [ ] Editツールでtasklist.mdを更新したか？
- [ ] ユーザーが見て進捗が分かる状態か？

## 重要なリマインダー

- TodoWriteは揮発的なメモ（ユーザーには見えない）
- **tasklist.mdこそが永続的なドキュメント（ユーザーが見る）**

実装中は常に「ユーザーがtasklist.mdを見たときに進捗が分かるか？」を自問してください。
